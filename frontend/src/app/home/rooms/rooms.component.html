<form (ngSubmit)="onSubmit($event)" #roomsForm="ngForm">

  ROOMS
  <br>
  <mat-toolbar>

    <mat-toolbar-row>
      <mat-form-field appearance="standard" id="inputForm">
        <input type="text" matInput id="roomName" required [(ngModel)]="newRoomName" name="roomName" #name="ngModel"
          placeholder="New roomname">
      </mat-form-field>

      <button type="submit" mat-raised-button color="primary" name="newRoom" [disabled]="!roomsForm.form.valid">
        Join Room
      </button>
    </mat-toolbar-row>
  </mat-toolbar>
  <mat-list>

    <mat-list-item *ngFor=" let roomName of currentRoomNames ">

      <mat-divider></mat-divider>

      <button type="submit" mat-button name="{{roomName}}" (click)="clickedCurrentRoom(roomName)">
        {{roomName}}
        <span
          *ngIf="roomNotifications[roomName] !== 0 && roomNotifications[roomName] !== undefined && currentRoomName !== roomName">
          (Unread: {{roomNotifications[roomName]}})
        </span>
      </button>

      <div id="menutoright">

        <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Menu">
          <mat-icon>more_vert</mat-icon>
        </button>

        <mat-menu #menu="matMenu">

          <ng-container *ngIf="currentOp; then showOptions; else showNoOptions">
          </ng-container>

          <ng-template #showOptions>


            <ng-container *ngIf="!currentVoiceInRoomRequired; then setVoiceOption; else unsetVoiceOption">
            </ng-container>

            <ng-template #setVoiceOption>
              <button mat-menu-item (click)="setVoiceButtonClicked(roomName, true)">
                <mat-icon>voice_over_off</mat-icon>
                <span>Set Voice Required</span>
              </button>
            </ng-template>

            <ng-template #unsetVoiceOption>
              <button mat-menu-item (click)="setVoiceButtonClicked(roomName, false)">
                <mat-icon>keyboard_voice</mat-icon>
                <span>Unset Voice Required</span>
              </button>
            </ng-template>

            <ng-container *ngIf="!currentInviteRequired; then setInviteOption; else unsetInviteOption">
            </ng-container>

            <ng-template #setInviteOption>
              <button mat-menu-item (click)="setInviteRoomButtonClicked(roomName, true)">
                <mat-icon>lock</mat-icon>
                <span>Set Invite Required</span>
              </button>
            </ng-template>

            <ng-template #unsetInviteOption>
              <button mat-menu-item (click)="setInviteRoomButtonClicked(roomName, false)">
                <mat-icon>lock_open</mat-icon>
                <span>Unset Invite Required</span>
              </button>
            </ng-template>

            <button mat-menu-item (click)="inviteToRoomItemClicked(roomName, true)">
              <mat-icon>insert_invitation</mat-icon>
              <span>Invite To Room</span>
            </button>

            <button mat-menu-item (click)="inviteToRoomItemClicked(roomName, false)">
              <mat-icon>do_not_touch</mat-icon>
              <span>Uninvite To Room</span>
            </button>

          </ng-template>

          <ng-template #showNoOptions>
            <button mat-menu-item>
              <mat-icon>lock</mat-icon>
              <span>You are no Op</span>
            </button>
          </ng-template>

          <button mat-menu-item (click)="leaveItemClicked(roomName)">
            <mat-icon>meeting_room</mat-icon>
            <span>Leave Chat</span>
          </button>


        </mat-menu>
      </div>

    </mat-list-item>
  </mat-list>

</form>